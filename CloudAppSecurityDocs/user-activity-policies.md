---
title: Cloud App Security でアクティビティを制御するポリシーを作成する
description: この記事では、アクティビティ ポリシーを作成して使用する手順について説明します。
author: shsagir
ms.author: shsagir
ms.service: cloud-app-security
ms.topic: conceptual
ms.date: 03/01/2020
ms.collection: M365-security-compliance
ms.reviewer: reutam
ms.suite: ems
ms.custom: seodec18
ms.openlocfilehash: 05913fd94738b253be9b9136e38e0c0f3e92f8aa
ms.sourcegitcommit: be2cad84fd9f5c340dfeb38cf95f4950fbcf0dcb
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/20/2020
ms.locfileid: "83705634"
---
# <a name="activity-policies"></a>アクティビティ ポリシー

*適用対象:Microsoft Cloud App Security*

アクティビティ ポリシーにより、アプリ プロバイダーの API を使用して、幅広い自動プロセスを適用できます。 これらのポリシーにより、さまざまなユーザーによって実行される特定のアクティビティを監視したり、予期しない高い割合の 1 つの特定の種類のアクティビティを追跡したりできます。

アクティビティ検出ポリシーを設定すると、アラートの生成が開始されます。アラートは、ポリシーの作成後に発生したアクティビティに対してのみ生成されます。

> [!NOTE]
> 過去 7 日のうち 3 日で 1 日あたり 5 万件を超える一致をトリガーするポリシーは、自動的に無効になります。 さらにフィルターを追加してポリシーを絞り込むか、またはレポートのためにポリシーを使用している場合は、代わりに[クエリとして保存する](activity-filters-queries.md#activity-queries)ことを検討してください。

## <a name="custom-alerts"></a>カスタム アラート

アクティビティ ポリシーにより、ユーザー アクティビティが検出されたときに、カスタム アラートを送信させたり、アクションを実行したりできます。 たとえば、次のようなときは毎回知りたいと考えます。

- ユーザーがサインインを試み、1 分で 70 回失敗する
- ユーザーが 7000 ファイルをダウンロードする
- ユーザーがアフガニスタンからログインしている

これらのイベントが発生したときに、自分またはユーザーに、アクティビティ アラートが送信されるように設定できます。 何が発生したかの調査が完了するまで、ユーザーを一時停止させることもできます。

新しいアクティビティ ポリシーを作成するには、次の手順を実行します。

1. コンソールで、 **[制御]** 、 **[ポリシー]** の順にクリックします。

2. **[ポリシーの作成]** をクリックし、 **[アクティビティ ポリシー]** を選択します。

     ![アクティビティ ポリシー メニュー](media/activity-policy-menu.png)

3. ポリシーに名前と説明を指定します。必要に応じて、テンプレートのベースにすることができます。ポリシー テンプレートの詳細については、「[ポリシーによるクラウド アプリの制御](control-cloud-apps-with-policies.md)」を参照してください。

4. このポリシーをトリガーするアクションまたは他のメトリックを設定するには、**アクティビティ フィルター**を使用します。
    > [!NOTE]
    > 指定したフィルター フィールドに値が設定されている結果のみを含めるようにするには、 **[が設定されている]** テストを使用して、同じフィールドを再度追加することが推奨されます。 たとえば、 **[場所]** *[が次に等しくない]* 指定された国の一覧、の場合、 **[場所]** *[が設定されている]* のフィルターも追加します。 **[結果の編集とプレビュー]** を選択して、フィルター結果をプレビューすることもできます。
    >
    > ![[場所] フィールド [が設定されている] を示す、フィルター設定のスクリーンショット](media/activity-example-location-isset.png)

5. **[Activity match parameters]\(アクティビティ一致パラメーター\)** で、ポリシー違反がトリガーされるタイミングを選択します。 1 つのアクティビティがフィルターに一致した場合、または指定した数の**反復アクティビティ**が検出された場合にのみトリガーするように選択します。
    - **[反復アクティビティ]** を選択した場合、 **[1 つのアプリで]** を設定できます。 この設定により、同じアプリで反復アクティビティが発生した場合にのみ、ポリシー一致がトリガーされます。 たとえば、Box から 30 分で 5 回のダウンロードによって、ポリシー一致がトリガーされます。

6. 一致が見つかったときに実行する必要がある**アクション**を構成します。

これらの例を確認してください。

- 複数回失敗したログイン

    短期間に多数の失敗したログインが発生した場合に、アラートを受け取るようにポリシーを設定できます。 この種のポリシーを構成するには、 **[New Activity Policy]\(新しいアクティビティ ポリシー\)** ページで適切なアクティビティ フィルターを選択します。

    **[アクティビティ フィルター]** フィールドの下で、アラートをトリガーさせるパラメーターを構成します。

    ![複数回失敗したサインイン試行のポリシーの例](media/multiple-failed-log-on-attempts-policy-example.png "複数の失敗したログオン試行ポリシーの例")

- 高いダウンロード レート

    予期しない、または典型的でないレベルのダウンロード アクティビティが発生したときにアラートを受け取るように、ポリシーを設定できます。 この種のポリシーを構成するには、 **[レート]** パラメーターで、アラートをトリガーするパラメーターを選択します。

    ![高いダウンロード レートの例](media/high-download-rate-example.png "高いダウンロード レートの例")

## <a name="activity-policy-reference"></a>アクティビティ ポリシー リファレンス

このセクションでは、ポリシーのリファレンス情報を提供し、各ポリシーの種類と各ポリシーに構成できるフィールドについて説明します。

**アクティビティ ポリシー**は API ベースのポリシーで、クラウド内の組織のアクティビティを監視できます。 ポリシーでは、デバイスの種類や場所など、20 を超えるファイル メタデータ フィルターが考慮されます。 ポリシー結果に基づいて、通知を生成でき、ユーザーをクラウド アプリから一時停止させることができます。
各ポリシーは、次の部分で構成されます。

- アクティビティ フィルター - メタデータに基づいて詳細な条件を作成できます。

- アクティビティ一致パラメーター - ポリシーに一致すると見なされるアクティビティの反復回数のしきい値を設定できます。  ポリシーに一致するために必要な反復アクティビティの数を指定します。 たとえば、ユーザーが 2 分間に 10 回ログイン試行に失敗した場合にアラートするポリシーを設定します。 既定で、**アクティビティ一致パラメーター**によって、すべてのアクティビティ フィルターを満たすすべての各アクティビティに対して一致が発生します。

  - **反復アクティビティ**を使用して、反復アクティビティの数、アクティビティがカウントされる期間を設定できます。 すべてのアクティビティを同じユーザーによって、同じクラウド アプリで実行するように指定することもできます。

- アクション - ポリシーには、違反が検出されたときに自動的に適用できる一連のガバナンス アクションが用意されています。

## <a name="next-steps"></a>次のステップ

> [!div class="nextstepaction"]
> [データ保護ポリシー](data-protection-policies.md)

[!INCLUDE [Open support ticket](includes/support.md)]
